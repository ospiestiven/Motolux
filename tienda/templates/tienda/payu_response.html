{% extends 'tienda/index/base1.html' %}
{% block content %}
<div class="container my-5">
    <div class="card p-4 text-center">
        <h3 class="mb-3">Resultado del pago</h3>
        {% if state_pol == "4" %}
        <p class="text-success fw-bold">✅ ¡Tu pago fue aprobado!</p>
        {% elif state_pol == "6" %}
        <p class="text-danger fw-bold">❌ Tu pago fue rechazado.</p>
        {% elif state_pol == "5" %}
        <p class="text-warning fw-bold">⚠️ El pago expiró.</p>
        {% else %}
        <p class="text-secondary">Estado: {{ state_pol|default:"desconocido" }}</p>
        {% endif %}
        <a href="{% url 'catalogo' %}" class="btn btn-danger mt-3">Volver al catálogo</a>
    </div>
</div>
{% endblock %}{% extends 'tienda/index/base1.html' %}
{% load static %}

{% block content %}
<div class="container my-5 text-center">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow p-4">
                {% if state_pol == "4" %}
                    <!-- PAGO APROBADO -->
                    <i class="bi bi-check-circle-fill text-success" style="font-size: 4rem;"></i>
                    <h2 class="mt-3">¡Pago Aprobado!</h2>
                    <p>Gracias por tu compra. Hemos recibido tu pago y tu pedido con referencia <strong>{{ params.reference_sale }}</strong> está siendo procesado.</p>
                    <p>Recibirás una confirmación por correo electrónico en breve.</p>
                    <a href="{% url 'perfil' %}" class="btn btn-danger mt-3">Ver mis pedidos</a>

                {% elif state_pol == "6" %}
                    <!-- PAGO RECHAZADO -->
                    <i class="bi bi-x-circle-fill text-danger" style="font-size: 4rem;"></i>
                    <h2 class="mt-3">Pago Rechazado</h2>
                    <p>Lo sentimos, tu pago no pudo ser procesado. El motivo fue: <strong>{{ params.response_message_pol }}</strong>.</p>
                    <p>Por favor, intenta con otro método de pago o contacta a tu banco.</p>
                    <a href="{% url 'detalles_facturacion' %}" class="btn btn-outline-danger mt-3">Volver a intentar</a>

                {% elif state_pol == "5" %}
                    <!-- PAGO EXPIRADO O CANCELADO -->
                    <i class="bi bi-clock-history text-warning" style="font-size: 4rem;"></i>
                    <h2 class="mt-3">Pago Expirado</h2>
                    <p>El tiempo para completar el pago ha expirado o fue cancelado.</p>
                    <a href="{% url 'detalles_facturacion' %}" class="btn btn-outline-danger mt-3">Intentar de nuevo</a>

                {% else %}
                    <!-- OTRO ESTADO (PENDIENTE, ETC.) -->
                    <i class="bi bi-hourglass-split text-info" style="font-size: 4rem;"></i>
                    <h2 class="mt-3">Pago Pendiente</h2>
                    <p>Tu pago está pendiente de confirmación. El estado de tu pedido se actualizará automáticamente.</p>
                    <p>Referencia de la transacción: <strong>{{ params.transaction_id }}</strong></p>
                    <a href="{% url 'index' %}" class="btn btn-secondary mt-3">Volver a la tienda</a>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
